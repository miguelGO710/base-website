{"ast":null,"code":"import BaseSegment from './BaseSegment.js';\nimport { Vec3 } from '../../math/Vec3.js';\nimport { T_VALUES, C_VALUES } from './utils.js';\nconst tempVec3 = /* @__PURE__ */new Vec3();\nfunction cubicBezier(t, p0, p1, p2, p3) {\n  const k = 1 - t;\n  // prettier-ignore\n  return k * k * k * p0 + 3 * k * k * t * p1 + 3 * k * t * t * p2 + t * t * t * p3;\n}\nfunction cubicBezierDeriv(t, p0, p1, p2, p3) {\n  const k = 1 - t;\n  // prettier-ignore\n  return 3 * k * k * (p1 - p0) + 6 * k * t * (p2 - p1) + 3 * t * t * (p3 - p2);\n}\nexport default class CubicBezierSegment extends BaseSegment {\n  constructor(p0, p1, p2, p3, tiltStart = 0, tiltEnd = 0) {\n    super();\n    this.p0 = p0;\n    this.p1 = p1;\n    this.p2 = p2;\n    this.p3 = p3;\n    this.tiltStart = tiltStart;\n    this.tiltEnd = tiltEnd;\n    this._len = -1;\n  }\n\n  /**\n   * Updates the segment length. You must call this method every time you change the curve's control points.\n   */\n  updateLength() {\n    // from https://github.com/Pomax/bezierjs/blob/d19695f3cc3ce383cf38ce4643f467deca7edb92/src/utils.js#L265\n    const z = 0.5;\n    const len = T_VALUES.length;\n    let sum = 0;\n    for (let i = 0, t; i < len; i++) {\n      t = z * T_VALUES[i] + z;\n      sum += C_VALUES[i] * this.getDerivativeAt(t, tempVec3).len();\n    }\n    this._len = z * sum;\n  }\n\n  /**\n   * Get point at relative position in curve according to segment length.\n   * @param {number} t Distance at time t in range [0 .. 1]\n   * @param {Vec3} out Optional Vec3 to output\n   * @returns {Vec3} Point at relative position\n   */\n  getPointAt(t, out = new Vec3()) {\n    out.x = cubicBezier(t, this.p0.x, this.p1.x, this.p2.x, this.p3.x);\n    out.y = cubicBezier(t, this.p0.y, this.p1.y, this.p2.y, this.p3.y);\n    out.z = cubicBezier(t, this.p0.z, this.p1.z, this.p2.z, this.p3.z);\n    return out;\n  }\n  getDerivativeAt(t, out = new Vec3()) {\n    out.x = cubicBezierDeriv(t, this.p0.x, this.p1.x, this.p2.x, this.p3.x);\n    out.y = cubicBezierDeriv(t, this.p0.y, this.p1.y, this.p2.y, this.p3.y);\n    out.z = cubicBezierDeriv(t, this.p0.z, this.p1.z, this.p2.z, this.p3.z);\n    return out;\n  }\n\n  /**\n   * Returns a unit vector tangent at t\n   * @param {number} t Distance at time t in range [0 .. 1]\n   * @param {Vec3} out Optional Vec3 to output\n   * @returns {Vec3} A unit vector\n   */\n  getTangentAt(t, out = new Vec3()) {\n    return this.getDerivativeAt(t, out).normalize();\n  }\n  lastPoint() {\n    return this.p3;\n  }\n}","map":{"version":3,"names":["BaseSegment","Vec3","T_VALUES","C_VALUES","tempVec3","cubicBezier","t","p0","p1","p2","p3","k","cubicBezierDeriv","CubicBezierSegment","constructor","tiltStart","tiltEnd","_len","updateLength","z","len","length","sum","i","getDerivativeAt","getPointAt","out","x","y","getTangentAt","normalize","lastPoint"],"sources":["C:/Users/Utilizador/Documents/BASE_WEBSITE/node_modules/ogl/src/extras/path/CubicBezierSegment.js"],"sourcesContent":["import BaseSegment from './BaseSegment.js';\nimport { Vec3 } from '../../math/Vec3.js';\nimport { T_VALUES, C_VALUES } from './utils.js';\n\nconst tempVec3 = /* @__PURE__ */ new Vec3();\n\nfunction cubicBezier(t, p0, p1, p2, p3) {\n    const k = 1 - t;\n    // prettier-ignore\n    return (\n        (k * k * k * p0) +\n        (3 * k * k * t * p1) +\n        (3 * k * t * t * p2) +\n        (t * t * t * p3)\n    );\n}\n\nfunction cubicBezierDeriv(t, p0, p1, p2, p3) {\n    const k = 1 - t;\n    // prettier-ignore\n    return (\n        (3 * k * k * (p1 - p0)) +\n        (6 * k * t * (p2 - p1)) +\n        (3 * t * t * (p3 - p2))\n    );\n}\n\nexport default class CubicBezierSegment extends BaseSegment {\n    constructor(p0, p1, p2, p3, tiltStart = 0, tiltEnd = 0) {\n        super();\n        this.p0 = p0;\n        this.p1 = p1;\n        this.p2 = p2;\n        this.p3 = p3;\n\n        this.tiltStart = tiltStart;\n        this.tiltEnd = tiltEnd;\n\n        this._len = -1;\n    }\n\n    /**\n     * Updates the segment length. You must call this method every time you change the curve's control points.\n     */\n    updateLength() {\n        // from https://github.com/Pomax/bezierjs/blob/d19695f3cc3ce383cf38ce4643f467deca7edb92/src/utils.js#L265\n        const z = 0.5;\n        const len = T_VALUES.length;\n\n        let sum = 0;\n        for (let i = 0, t; i < len; i++) {\n            t = z * T_VALUES[i] + z;\n            sum += C_VALUES[i] * this.getDerivativeAt(t, tempVec3).len();\n        }\n\n        this._len = z * sum;\n    }\n\n    /**\n     * Get point at relative position in curve according to segment length.\n     * @param {number} t Distance at time t in range [0 .. 1]\n     * @param {Vec3} out Optional Vec3 to output\n     * @returns {Vec3} Point at relative position\n     */\n    getPointAt(t, out = new Vec3()) {\n        out.x = cubicBezier(t, this.p0.x, this.p1.x, this.p2.x, this.p3.x);\n        out.y = cubicBezier(t, this.p0.y, this.p1.y, this.p2.y, this.p3.y);\n        out.z = cubicBezier(t, this.p0.z, this.p1.z, this.p2.z, this.p3.z);\n        return out;\n    }\n\n    getDerivativeAt(t, out = new Vec3()) {\n        out.x = cubicBezierDeriv(t, this.p0.x, this.p1.x, this.p2.x, this.p3.x);\n        out.y = cubicBezierDeriv(t, this.p0.y, this.p1.y, this.p2.y, this.p3.y);\n        out.z = cubicBezierDeriv(t, this.p0.z, this.p1.z, this.p2.z, this.p3.z);\n        return out;\n    }\n\n    /**\n     * Returns a unit vector tangent at t\n     * @param {number} t Distance at time t in range [0 .. 1]\n     * @param {Vec3} out Optional Vec3 to output\n     * @returns {Vec3} A unit vector\n     */\n    getTangentAt(t, out = new Vec3()) {\n        return this.getDerivativeAt(t, out).normalize();\n    }\n\n    lastPoint() {\n        return this.p3;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}